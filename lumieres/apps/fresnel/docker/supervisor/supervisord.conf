[unix_http_server]
file=/var/run/supervisor.sock
chmod=0700

[supervisord]
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor
nodaemon=true
user=root

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock

# PHP-FPM - Service principal pour l'application
[program:php-fpm]
command=php-fpm --nodaemonize
autostart=true
autorestart=true
priority=5
stdout_logfile=/var/log/supervisor/php-fpm.log
stderr_logfile=/var/log/supervisor/php-fpm.log
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0

# Nginx - Serveur web (optionnel - activé seulement si nécessaire)
[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
priority=10
stdout_logfile=/var/log/supervisor/nginx.log
stderr_logfile=/var/log/supervisor/nginx.log
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0

# NOTE: Queue Worker et Scheduler sont gérés par des containers dédiés dans docker-compose.yml
# Ceci assure une meilleure scalabilité et isolation des services

# Laravel Queue Worker - Géré par container 'worker' dans docker-compose.yml
# [program:laravel-worker] - SERVICE DÉSAGÉ

# Laravel Scheduler - Géré par container 'scheduler' dans docker-compose.yml  
# [program:laravel-cron] - SERVICE DÉSAGÉ
